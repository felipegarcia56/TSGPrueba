<div class='container pt-5 mt-5 card'>
	<div class="row pt-3 pb-2">
		<div class="col-sm-8 col-md-8 col-lg-8">
			<h5 class="text-center">Recursos TSG</h5>
		</div>
		<div class="col-sm-4 col-md-4 col-lg-4">
			<p>
			  <a class="btn btn-sm btn-secondary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
			    Crear Recursos
			  </a>
			</p>
		</div>
	</div>

	<div class="row p-3 ">
		<div class="col">
			<div class="collapse" id="collapseExample">
			  <div class="card card-body">
			    <form  [formGroup]="createForm" (ngSubmit)="crearRecursos(createForm.value)">
					<div class="row w-100 p-2 mx-auto">
						<div class="col-sm-3 col-md-3 col-lg-3">					
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Descripcion</label>
								<input class="form-control form-control-sm px-3" type="text" formControlName="descripcion">
							</div>
						</div>
						<div class="col-sm-3 col-md-3 col-lg-3">
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Serial</label>
								<input class="form-control form-control-sm px-3" type="text" formControlName="serial">
							</div>
						</div>
						<div class="col-sm-3 col-md-3 col-lg-3">
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Valor</label>
								<input class="form-control form-control-sm px-3" type="text" formControlName="valor">
							</div>
						</div>
						<div class="col-sm-3 col-md-3 col-lg-3">
							
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Fecha Compra</label>
								<input class="form-control form-control-sm px-3" type="date" formControlName="fecha_compra">
							</div>
						</div>
					</div>
					<div class="row w-100 p-2 mx-auto">
						<div class="col-sm-3 col-md-3 col-lg-3">
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Marca</label>
						  		<select class="form-control form-control-sm " formControlName="marca">	
									<option *ngFor="let marca of marcas" [value] = "marca.id">
										{{marca.descripcion}}
									</option>
								</select>
							</div>
						</div>
						<div class="col-sm-3 col-md-3 col-lg-3">
							
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Proveedor</label>
						  		<select class="form-control form-control-sm " formControlName="proveedor">	
									<option *ngFor="let proveedor of proveedores" [value] = "proveedor.id">
										{{proveedor.descripcion}}
									</option>
								</select>
							</div>
						</div>
						<div class="col-sm-3 col-md-3 col-lg-3">
							
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Estado</label>
						  		<select class="form-control form-control-sm " formControlName="estado">	
									<option *ngFor="let estado of estados" [value] = "estado.id">
										{{estado.descripcion}}
									</option>
								</select>
							</div>
						</div>
						<div class="col-sm-3 col-md-3 col-lg-3">
							
							<div class="form-group" style="display: contents;">
								<label class="label label-default px-3">Tipo</label>
						  		<select class="form-control form-control-sm " formControlName="tipo">	
									<option *ngFor="let tipo of tipos" [value] = "tipo.id">
										{{tipo.descripcion}}
									</option>
								</select>
							</div>
						</div>
					</div>
					<div class="row w-100 p-2 mx-auto">
						<div class="col text-center">					
							<div class="form-group" style="display: contents;">
								<button class="btn btn-sm btn-success px-3" type="submit">Crear</button>	
							</div>
						</div>
					</div>	
				</form>
			  </div>
			</div>	
		</div>
	</div>
	<div class = "row w-100 p-3">
		<div class="col">
			<div class="row">
				<div class="col-sm-3 col-md-3 col-lg-3 text-center">
					<label class=label>Serial: 
					</label>
					<input class="form-control form-control-sm" type="text" [disabled]="tipoFilter!='' || marcaFilter != ''"  [(ngModel)]="serFilter">
				</div>
				<div class="col-sm-3 col-md-3 col-lg-3">
					<label class=label>Tipo: 
					</label>
						<select class="form-control form-control-sm w-100" [disabled]="serFilter!='' || marcaFilter != ''" [(ngModel)]="tipoFilter">	
							<option value="" selected="selected">Seleccione</option>
							<option *ngFor="let tipo of tipos" [value] = "tipo.id">
								{{tipo.descripcion}}
							</option>
						</select>
				</div>
				<div class="col-sm-3 col-md-3 col-lg-3">
					<label class=label>Marca: 
					</label>
						<select class="form-control form-control-sm w-100" [disabled]="serFilter!='' || tipoFilter != ''"[(ngModel)]="marcaFilter">	
							<option value="" selected="selected">Seleccione</option>
							<option *ngFor="let marca of marcas" [value] = "marca.id">
								{{marca.descripcion}}
							</option>
						</select>
				</div>
				<div class="col-sm-3 col-md-3 col-lg-3">
					<button class="btn btn-info  " type="button" (click)="filtrarTable()">Buscar</button>
				</div>
			</div>
		</div>
	</div>
	<div class="row" style="position: relative">
		<table class="table table-striped">
			<thead>
				<tr>
				  	<th scope="col">Descripcion</th>
				  	<th scope="col"><span>Serial</span></th>
				  	<th scope="col">Valor</th>
				  	<th scope="col">Fecha de compra</th>
				  	<th scope="col">Marca</th>
				  	<th scope="col">Proveedor</th>
				  	<th scope="col">Estado</th>
				  	<th scope="col">Tipo de recurso</th>
				  	<th scope="col">Actualizar</th>
				  	<th scope="col">Eliminar</th>
				  	
				</tr>
			</thead>
			<tbody>
				<tr *ngFor='let recurso of recursos'>
					<td>
				    	<input class="form-control form-control-sm" type="text" [(ngModel)]="recurso.descripcion">
				  	</td>
				  	<td>
				    	<input class="form-control form-control-sm" type="text" [(ngModel)]="recurso.serial">
				  	</td>
				  	<td>
				    	<input class="form-control form-control-sm" type="text" [(ngModel)]="recurso.valor">
				  	</td>
				  	<td>
				    	<input class="form-control form-control-sm" type="date" [(ngModel)]="recurso.fecha_compra">
				  	</td>
				  	<td>
				  		<select class="form-control form-control-sm w-100" [(ngModel)]="recurso.marca.id">	
							<option *ngFor="let marca of marcas" [value] = "marca.id">
								{{marca.descripcion}}
							</option>
						</select>
				  	</td>
				  	<td>
				  		<select class="form-control form-control-sm w-100" [(ngModel)]="recurso.proveedor.id">	
							<option *ngFor="let proveedor of proveedores" [value] = "proveedor.id">
								{{proveedor.descripcion}}
							</option>
						</select>
				  	</td>
				  	<td>
				  		<select class="form-control form-control-sm w-100" [(ngModel)]="recurso.estado.id">	
							<option *ngFor="let estado of estados" [value] = "estado.id">
								{{estado.descripcion}}
							</option>
						</select>
				  	</td>
				  	<td>
				  		<select class="form-control form-control-sm w-100" [(ngModel)]="recurso.tipo.id">	
							<option *ngFor="let tipo of tipos" [value] = "tipo.id">
								{{tipo.descripcion}}
							</option>
						</select>
				  	</td>
					<td>
					    <button class="btn btn-info btn-sm " type="button" (click)="actualizarRecursos(recurso)">actualizar</button>
		  			</td>
					<td>
					    <button class="btn btn-danger btn-sm " type="button" (click)="borrarRecursos(recurso.id)">eliminar</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>